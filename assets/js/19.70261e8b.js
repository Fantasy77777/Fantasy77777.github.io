(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{234:function(t,e,r){"use strict";r.r(e);var v=r(28),a=Object(v.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"vue数据响应式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#vue数据响应式"}},[t._v("#")]),t._v(" Vue数据响应式")]),t._v(" "),r("h2",{attrs:{id:"vue2-x中"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#vue2-x中"}},[t._v("#")]),t._v(" Vue2.x中")]),t._v(" "),r("p",[t._v("在Vue2.x中是通过Object.defineProperty()的方式来实现响应式数据。")]),t._v(" "),r("p",[t._v("即Object.defineProperty()对data里面的所有属性进行遍历添加getter和setter，给这个对象某个属性赋值，就会触发setter，就能监听数据变化")]),t._v(" "),r("h3",{attrs:{id:"object-defineproperty-优缺点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#object-defineproperty-优缺点"}},[t._v("#")]),t._v(" Object.defineProperty()优缺点")]),t._v(" "),r("p",[t._v("优点：兼容性好，支持IE9")]),t._v(" "),r("p",[t._v("缺点：不能直接监听数据的变化，在Vue2.x中，为了监听数组，源码上对数组的方法进行了重写。")]),t._v(" "),r("h2",{attrs:{id:"vue3-0中"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#vue3-0中"}},[t._v("#")]),t._v(" Vue3.0中")]),t._v(" "),r("p",[t._v("通过Proxy来实现数据响应式")]),t._v(" "),r("h3",{attrs:{id:"proxy优缺点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#proxy优缺点"}},[t._v("#")]),t._v(" Proxy优缺点")]),t._v(" "),r("p",[t._v("优点：")]),t._v(" "),r("ol",[r("li",[t._v("作为浏览器新标准")]),t._v(" "),r("li",[t._v("可以直接监听对象和数组的变化，拦截方法有13种")]),t._v(" "),r("li",[t._v("返回新的对象，而Object.defineProperty()要遍历对象属性")])]),t._v(" "),r("p",[t._v("缺点：")]),t._v(" "),r("ol",[r("li",[t._v("Proxy只会代理对象的第一层")]),t._v(" "),r("li",[t._v("存在兼容性问题，用polyfill也不能磨平")])]),t._v(" "),r("p",[t._v("解决第一点的问题，Vue3.0中是这样做的")]),t._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),r("p",[t._v("判断当前的Reflect.get的返回值是否为Object，如果是则再通过reactive方法做代理， 这样就实现了深度观测。")]),t._v(" "),r("p",[t._v("监测数组的时候可能触发多次get/set，那么如何防止触发多次呢？我们可以判断key是否为当前被代理对象target自身属性，也可以判断旧值与新值是否相等，只有满足以上两个条件之一时，才有可能执行trigger。")])])])}),[],!1,null,null,null);e.default=a.exports}}]);